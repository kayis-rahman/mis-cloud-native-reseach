global:
  imagePullPolicy: IfNotPresent
  imageRegistry: "ghcr.io"
  # Ingress global control
  ingress:
    enabled: false
    className: ""
    hosts: []
    tls: []
    # If true, expose api-gateway at root path "/" instead of "/api-gateway"
    gatewayRoot: false

# Observability configuration
observability:
  enabled: true
  prometheus:
    enabled: true
    namespace: observability
  grafana:
    enabled: true
    namespace: observability
  elk:
    enabled: true
    namespace: observability
  jaeger:
    enabled: true
    namespace: observability
  # Enable observability profile for all services
  profileActive: true

# Define microservices here
services:
  api-gateway:
    enabled: true
    name: api-gateway
    image: "api-gateway:latest"
    replicaCount: 1
    containerPort: 8080
    usesDb: false
    service:
      type: ClusterIP
      port: 8080
    resources: {}
    security:
      apiKeys: "default-key-please-change"
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health
      initialDelaySeconds: 20
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health
      initialDelaySeconds: 10
      periodSeconds: 10
    # Observability annotations
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "8080"

  identity:
    enabled: true
    name: identity-service
    image: "identity:latest"
    replicaCount: 1
    containerPort: 9000
    usesDb: true
    service:
      type: ClusterIP
      port: 9000
    resources: {}
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health/liveness
      initialDelaySeconds: 30
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health/readiness
      initialDelaySeconds: 20
      periodSeconds: 10
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "9000"

  product:
    enabled: true
    name: product-service
    image: "product:latest"
    replicaCount: 1
    containerPort: 9001
    usesDb: true
    service:
      type: ClusterIP
      port: 9001
    resources: {}
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health/liveness
      initialDelaySeconds: 20
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health/readiness
      initialDelaySeconds: 10
      periodSeconds: 10
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "9001"

  cart:
    enabled: true
    name: cart-service
    image: "cart:latest"
    replicaCount: 1
    containerPort: 9002
    usesDb: true
    service:
      type: ClusterIP
      port: 9002
    resources: {}
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health/liveness
      initialDelaySeconds: 20
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health/readiness
      initialDelaySeconds: 10
      periodSeconds: 10
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "9002"

  order:
    enabled: true
    name: order-service
    image: "order:latest"
    replicaCount: 1
    containerPort: 9003
    usesDb: true
    service:
      type: ClusterIP
      port: 9003
    resources: {}
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health/liveness
      initialDelaySeconds: 20
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health/readiness
      initialDelaySeconds: 10
      periodSeconds: 10
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "9003"

  payment:
    enabled: true
    name: payment-service
    image: "payment:latest"
    replicaCount: 1
    containerPort: 9004
    usesDb: true
    service:
      type: ClusterIP
      port: 9004
    resources: {}
    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "observability"
    livenessProbe:
      path: /actuator/health/liveness
      initialDelaySeconds: 20
      periodSeconds: 10
    readinessProbe:
      path: /actuator/health/readiness
      initialDelaySeconds: 10
      periodSeconds: 10
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: "/actuator/prometheus"
      prometheus.io/port: "9004"
